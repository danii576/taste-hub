<!-- index.component.html -->
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="https://unpkg.com/primeicons/primeicons.css" />

<div class="topbar">
  <!-- Sidebar Toggle Button -->
  <div class="dropdown">
    <button class="dropdown-toggle" (click)="toggleDropdown()">
      <i class="pi pi-bars"></i>
    </button>
  </div>

  <!-- Sidebar Menu -->
  <div class="sidebar" [class.open]="dropdownOpen">
   <button (click)="MenuClick()">
  <i class="pi pi-list"></i>
  {{ 'TOPBAR.MENU' | translate }}
</button>

<button (click)="aboutClick()">
  <i class="pi pi-info-circle"></i>
  {{ 'TOPBAR.ABOUT' | translate }}
</button>

<button (click)="timingClick()">
  <i class="pi pi-clock"></i>
  {{ 'TOPBAR.TIMING' | translate }}
</button>

<button (click)="contactClick()">
  <i class="pi pi-phone"></i>
  {{ 'TOPBAR.CONTACT' | translate }}
</button>

    <div class="sidebar-contact">
      <div class="contact-item">
        <i style="color: blue;" class="pi pi-phone"></i>
        <a style="color: blue;" href="https://wa.me/351920420832" target="_blank">+351 920 420 832</a>
      </div>
      <div class="contact-item">
        <i style="color: blue;" class="pi pi-envelope"></i>
        <a style="color: blue;" href="mailto:danirasheed60@gmail.com">danirasheed60&#64;gmail.com</a>
      </div>
      <div class="contact-item">
        <i style="color: blue;" class="pi pi-map-marker"></i>
        <a style="color: blue;" href="https://www.google.com/maps/search/?api=1&query=Rua+das+Delícias,+123,+Lisboa,+Portugal"
          target="_blank">
          Rua das Delícias, 123, Lisboa, Portugal
        </a>
      </div>
      <div class="social-icons">
        <a href="https://facebook.com" class="facebook" target="_blank">
          <i class="pi pi-facebook"></i>
        </a><br>
        <a href="https://instagram.com" class="instagram" target="_blank">
          <i class="pi pi-instagram"></i>
        </a><br>
        <a href="https://twitter.com" class="twitter" target="_blank">
          <i class="pi pi-twitter"></i>
        </a><br>
        <a href="https://wa.me/351920420832" target="_blank">
          <i class="pi pi-whatsapp"></i>
        </a><br>
        

      </div>
    </div>
      
  </div>

  <!-- Optional overlay for backdrop -->
  <div class="overlay" *ngIf="dropdownOpen" (click)="toggleDropdown()"></div>

  <!-- Logo Center -->
  <div class="logo">
    <button (click)="pageLogoClick()" class="logo-button">
      <img src="assets/site-images/favicon.jpg" alt="Logo" />
    </button>
  </div>

  <!-- Top Right Menu -->
  <div class="menu">
    <button (click)="themeClick()">
      <i [class]="isDarkMode ? 'pi pi-moon' : 'pi pi-sun'"></i>
      {{ 'TOPBAR.MODE' | translate }}
    </button>

    <button (click)="homeClick()" [ngClass]="{ active: currentRoute === '/home' }">
      <i class="pi pi-home"></i>
      {{ 'TOPBAR.HOME' | translate }}
    </button>

    <button (click)="toggleLang()" style="display: flex; align-items: center; gap: 6px;">
      <img [src]="currentLang === 'pt' ? 'assets/Flag/flag-PT.png' : 'assets/Flag/flag-EN.png'" alt="Language Flag"
        style="width: 22px; height: 18px;" />
      {{ currentLang === 'pt' ? 'PT' : 'EN' }}
    </button>

    <li *ngIf="loggedUser" class="profile-container">
      <div class="profile-toggle" (click)="toggleProfileDropdown()">
        <span class="glyphicon glyphicon-user"></span>
        {{ loggedUser.name }} ▼
      </div>
<!-- Profile dropdown -->
<div *ngIf="showProfileDropdown && !showLogoutConfirm" class="profile-dropdown">
  <p style="color: blue;" >
    <i  class="pi pi-user icon"></i>
    <strong >{{ loggedUser.name }}</strong>
  </p>
  <p style="color: blue;" >
    <i class="pi pi-envelope icon"></i>
    {{ loggedUser.email }}
  <p style="color: blue;" >
  <a href="#" (click)="showLogoutConfirm = true; $event.preventDefault()">
    <i class="pi pi-sign-out icon"></i>
    {{ 'TOPBAR.PROFILE.LOGOUT' | translate }}
  </a>
</div>


      <!-- Logout confirmation -->
      <div *ngIf="showProfileDropdown && showLogoutConfirm" class="confirm-popup">
        <p>{{ 'TOPBAR.PROFILE.CONFIRM_LOGOUT' | translate }}</p>
        <div  class="confirm-popup-buttons">
          <button class="cancel-btn" (click)="cancelLogout()">
            {{ 'TOPBAR.PROFILE.CANCEL' | translate }}
          </button>
          <button class="ok-btn" (click)="confirmLogout()">
            {{ 'TOPBAR.PROFILE.CONFIRM' | translate }}
          </button>
        </div>
      </div>
    </li>
  </div>
</div>